function extractTableData(e){if("undefined"!=typeof document){return processTable((new DOMParser).parseFromString(e,"text/html"))}if("undefined"!=typeof require){const{JSDOM:t}=require("jsdom");return processTable(new t(e).window.document)}throw new Error("Ambiente nÃ£o suportado")}function processTable(e){const t=[];let o=e.querySelector("table");if(!o){const t=e.querySelectorAll("table");for(let e of t)if(e.textContent.includes("Indicativo")||e.textContent.includes("Freq.TX")){o=e;break}}if(!o)return console.warn("Nenhuma tabela encontrada"),t;const n=[],r=o.querySelectorAll("tr");let l=null;for(let e of r){if(e.querySelectorAll('th, td[class*="xl7"]').length>5&&(e.textContent.includes("Indicativo")||e.textContent.includes("Freq"))){l=e;break}}l||(l=r[0]);l.querySelectorAll("th, td").forEach(e=>{n.push(e.textContent.trim().toLowerCase())});return o.querySelectorAll("tr").forEach(e=>{if(e===l||e.querySelectorAll("td").length<5)return;const o=e.querySelectorAll("td");if(o.length<n.length)return;const r={};if(n.forEach((e,t)=>{if(t<o.length){const n=o[t].textContent.trim();if(e.includes("indicativo"))r.callsign=n;else if(e.includes("freq.tx")||e.includes("freq"))r.tx=parseFloat(n.replace(",","."));else if(e.includes("off-set")||e.includes("offset")||e.includes("freq. rx"))r.rx=parseFloat(n.replace(",","."));else if(e.includes("cidade")){const e=n.match(/([A-Z]{2})?.*?\-?\s*([^\-,(]+)/);if(e){const t=e[1]||"SP",o=e[2]?e[2].trim():n.trim();r.location=[t,o]}else r.location=["SP",n.trim()]}else e.includes("tone")||e.includes("mode")?r.tone=n:e.includes("altitude")&&(r.altitude=parseInt(n)||0)}}),r.tx&&r.rx&&(r.offset=r.rx-r.tx),r.callsign){const e={offset:r.offset||0,rx:r.rx||0,tx:r.tx||0,location:r.location||["SP","Desconhecida"],info:{callsign:r.callsign,tone:r.tone||"",altitude:r.altitude||0}};t.push(e)}}),t}function tableToJSON(e){try{return extractTableData(e)}catch(e){return console.error("Erro ao extrair dados da tabela:",e),[]}}const isNODE="undefined"==typeof window,fromURL="https://www.labre-sp.org.br/diversos.php?xid=48",CIDADES=isNODE?require("../cidades.main.cjs"):"undefined"!=typeof window?window.cidades:globalThis.cidades;"undefined"!=typeof module&&module.exports?module.exports={extractTableData:extractTableData,tableToJSON:tableToJSON}:"undefined"!=typeof window&&(window.tableToJSON=tableToJSON);