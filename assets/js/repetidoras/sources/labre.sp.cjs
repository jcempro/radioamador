function extractTableData(e){if("undefined"!=typeof document){return processTable((new DOMParser).parseFromString(e,"text/html"))}if("undefined"!=typeof require){const{JSDOM:t}=require("jsdom");return processTable(new t(e).window.document)}throw new Error("Ambiente nÃ£o suportado")}function processTable(e){const t=[];let n=e.querySelector("table");if(!n){const t=e.querySelectorAll("table");for(let e of t)if(e.textContent.includes("Indicativo")||e.textContent.includes("Freq.TX")){n=e;break}}if(!n)return console.warn("Nenhuma tabela encontrada"),t;const o=[],r=n.querySelectorAll("tr");let l=null;for(let e of r){if(e.querySelectorAll('th, td[class*="xl7"]').length>5&&(e.textContent.includes("Indicativo")||e.textContent.includes("Freq"))){l=e;break}}l||(l=r[0]);l.querySelectorAll("th, td").forEach(e=>{o.push(e.textContent.trim().toLowerCase())});return n.querySelectorAll("tr").forEach(e=>{if(e===l||e.querySelectorAll("td").length<5)return;const n=e.querySelectorAll("td");if(n.length<o.length)return;const r={};if(o.forEach((e,t)=>{if(t<n.length){const o=n[t].textContent.trim();if(e.includes("indicativo"))r.callsign=o;else if(e.includes("freq.tx")||e.includes("freq"))r.tx=parseFloat(o.replace(",","."));else if(e.includes("off-set")||e.includes("offset")||e.includes("freq. rx"))r.rx=parseFloat(o.replace(",","."));else if(e.includes("cidade")){const e=o.match(/([A-Z]{2})?.*?\-?\s*([^\-,(]+)/);if(e){const t=e[1]||"SP",n=e[2]?e[2].trim():o.trim();r.location=[t,n]}else r.location=["SP",o.trim()]}else e.includes("tone")||e.includes("mode")?r.tone=o:e.includes("altitude")&&(r.altitude=parseInt(o)||0)}}),r.tx&&r.rx&&(r.offset=r.rx-r.tx),r.callsign){const e={offset:r.offset||0,rx:r.rx||0,tx:r.tx||0,location:r.location||["SP","Desconhecida"],info:{callsign:r.callsign,tone:r.tone||"",altitude:r.altitude||0}};t.push(e)}}),t}function tableToJSON(e){try{return extractTableData(e)}catch(e){return console.error("Erro ao extrair dados da tabela:",e),[]}}async function run(e,t,n,o=null){return tableToJSON(await commom._GET(fromURL))}const isNODE="undefined"==typeof window,commom=isNODE?require("../../common.main.cjs"):"undefined"!=typeof window?window.commom:globalThis.commom,fromURL="https://www.labre-sp.org.br/diversos.php?xid=48",CIDADES=isNODE?require("../cidades.main.cjs"):"undefined"!=typeof window?window.cidades:globalThis.cidades;isNODE&&(module.exports={run:run}),"undefined"!=typeof globalThis&&(globalThis.RPT_SOURCES={...globalThis.RPT_SOURCES?globalThis.RPT_SOURCES:{},rt4d:{run:run}},"undefined"!=typeof window&&(window.radioidnet=globalThis.RPT_SOURCES));