function resolverCaminhos(r,o=""){const e=""!==o.trim()||commom.isFile(r);r=r.replace(/^s*[\/\\]+/,""),r=e?commom.joinPath(r,`/uf/${o}/`):r;const n=commom.joinPath(RPT_PATH,r).replace(".json","");return{json:`${n}${e?"":"."}${o}.json`,base:n,estado:o}}async function carregarDados(r,o){return await commom.getItemLocalStorage(o,async()=>{for(const o of Array.isArray(r)?r:[r])try{const r=await commom._GET(o);if(commom.V_RETURN(r)&&(isNODE||r&&"object"==typeof r))return r}catch(r){console.log(r);continue}throw new Error("Não foi possível carregar nenhum arquivo")})}async function salvarDados(r,o,e="",n="json",t=null){if(n=String(n||"json").trim().toLowerCase(),!["json","csv"].includes(n))throw new Error(`Formato '${n}' não suportado.`);const s="string"==typeof o?o:o&&o.json||"",a=r=>r?r.replace(/[\/\\]+$/,""):r,i=(r,o=null)=>{if(!Array.isArray(r)||0===r.length)return"";const e=new Set;r.forEach(r=>{r&&"object"==typeof r&&(Object.keys(r).forEach(r=>e.add(r)),r.info&&"object"==typeof r.info&&Object.keys(r.info).forEach(r=>e.add(`info.${r}`)))});const n=Array.from(e),t=[];return null!==o&&Array.isArray(o)&&t.push(o.join(";")),r.forEach(r=>{const o=n.map(o=>{let e;if(o.startsWith("info.")){const n=o.slice(5);e=r.info?r.info[n]:""}else e=r[o];if(Array.isArray(e))return`"${e.join(",")}"`;if(null==e)return"";if("object"==typeof e)return`"${JSON.stringify(e).replace(/"/g,'""')}"`;let n=String(e);return n.includes(";")||n.includes('"')?`"${n.replace(/"/g,'""')}"`:n});t.push(o.join(";"))}),t.join("\n")},c=r=>{const o=a(r);try{if(commom&&"function"==typeof commom.isFile&&commom.isFile(o))return!0}catch(r){}return!!(r=>!!path.extname(r))(o)},d=((r,o)=>{const e=a(r||""),n=(r=>"csv"===r?".csv":".json")(o);if(!e)return`dados${n}`;if(c(e)){const r=(t=e,path.extname(t).toLowerCase()||"");return r?r!==n?((r,o)=>{const e=path.extname(r);return e?r.slice(0,-e.length)+o:r+o})(e,n):e:e+n}return path.join(e,`dados${n}`);var t})(s,n),l=((r,o,e=null)=>{if("string"==typeof r){const n=r;if("json"===o)return n;const t=n.trim();if(t.startsWith("{")||t.startsWith("["))try{const r=JSON.parse(n);return i(Array.isArray(r)?r:[r],e)}catch(r){return n}return n}if(Array.isArray(r)||"object"==typeof r)return"json"===o?JSON.stringify(r,null,0):i(Array.isArray(r)?r:[r],e);throw new Error("Tipo de 'registros' inválido.")})(r,n,t);return isNODE?((r,o)=>{const e=path.dirname(r);return fs.existsSync(e)||fs.mkdirSync(e,{recursive:!0}),fs.writeFileSync(r,o),r})(d,l):((r,o,e)=>{const n=new Blob([o],{type:"json"===e?"application/json":"text/csv"}),t=URL.createObjectURL(n),s=document.createElement("a");return s.href=t,s.download=r.split("/").pop(),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t),r})(d,l,n)}const isNODE="undefined"==typeof window,fs=isNODE?require("fs"):null,path=isNODE?require("path"):null,commom=isNODE?require("../common.main.cjs"):"undefined"!=typeof window?window.commom:globalThis.commom,SOURCES=isNODE?{radioid:require("./sources/radioid.net.main.cjs"),labresp:require("./sources/labre.sp.main.cjs")}:"undefined"!=typeof window?window.RPT_SOURCES:globalThis.RPT_SOURCES,csvMODELOS=isNODE?{rt4d:require("./modelos/rt4d.main.cjs")}:"undefined"!=typeof window?window.radioModels:globalThis.radioModels,ROOT=isNODE?process.cwd():"",DADOS=(r=>isNODE?path.resolve(r):r.replace(/\\/,"/"))(`${ROOT}/DADOS`),RPT_PATH=(r=>isNODE?path.resolve(r):r.replace(/\\/,"/"))(`${DADOS}/repetidoras`),salvarCSV=(r,o,e,n)=>{salvarDados(r,o,e,n),salvarDados(csvMODELOS.rt4d.converterParaModelo(r,csvMODELOS.rt4d.MODEL),o,e,"csv")};isNODE?(async()=>{await SOURCES.radioid.run(resolverCaminhos,carregarDados,salvarCSV,(r,o)=>{if(!o)throw new Error("\n[ERROR] resultados é inválido ou vazio.\n");salvarDados(o.contents,`${RPT_PATH}/radioidnet.csv`)}),await SOURCES.labresp.run(resolverCaminhos,carregarDados,salvarCSV,(r,o)=>{if(!o)throw new Error("\n[ERROR] resultados é inválido ou vazio.\n");salvarDados(o.contents,`${RPT_PATH}/labre-sp.csv`)})})():"loading"===document.readyState?document.addEventListener("DOMContentLoaded",criarInterfaceNavegador):criarInterfaceNavegador();