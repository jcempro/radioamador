const isNODE="undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.node,commom=isNODE?require("common.main.cjs"):"undefined"!=typeof window?window.commom:globalThis.commom,_=e=>document.querySelector(e),__fetchCache__=new Map,cachedFetch=async(e,t={},o=!0)=>{const r=Array.isArray(e)?e:[e],{retries:i=1,timeout:n=1e4}=t,a=e=>!e||404!==e&&(e>=500||429===e),s=e=>Promise.race([e,new Promise((e,t)=>setTimeout(()=>t(new Error("Timeout")),n))]);let c,l=null;for(let e=0;e<r.length;e++){let n=r[e];if("function"==typeof n&&(r[e]=n=await n(c),null===n))throw new Error("URL function returned null ‚Äî end of URL options");c=n;const d=`${n}-${JSON.stringify(t)}-${o}`;if(__fetchCache__.has(d))return __fetchCache__.get(d);try{for(let e=0;e<=i;e++)try{const r=await s(fetch(n,t));if(r.ok){const e=o?await r.json():!1===o?r:await r.text();return __fetchCache__.set(d,e),e}if(!a(r.status))throw new Error(`HTTP ${r.status}: ${r.statusText}`);if(e<i)continue;throw new Error(`HTTP ${r.status}: ${r.statusText}`)}catch(t){if(l=t,e<i)continue;throw t}}catch(t){l=t;const o=r[e+1];if(o){const e="function"==typeof o;console.log(`üîÑ Tentando fallback (${e?"fun√ß√£o":"URL"})...`)}continue}}throw new Error(`Todas as URLs falharam. √öltimo erro: ${l?.message}\n\n${JSON.stringify(r,null,2)}\n^^^^^^^^^\n`)};cachedFetch.clearCache=()=>__fetchCache__.clear(),cachedFetch.delete=(e,t={},o=!0)=>{const r=Array.isArray(e)?e:[e];let i=0;return r.forEach(e=>{if("string"==typeof e){const r=`${e}-${JSON.stringify(t)}-${o}`;__fetchCache__.delete(r)&&i++}}),i},cachedFetch.getCacheSize=()=>__fetchCache__.size,cachedFetch.getCacheKeys=()=>Array.from(__fetchCache__.keys());const getAllSumario=async()=>await cachedFetch("/DADOS/homologacoes/sumario_all.json");document.addEventListener("DOMContentLoaded",()=>{getAllSumario();const e=(e,t=!0)=>`${t?`${e}`:`${e}`.split("?t=")[0].split(".json")[0]}`.split("?").pop().split("/").pop().replace(/[^a-z0-9\/]/i,"").trim().split("/"),t=e(window.location.search),o='\n\n<br /><br /><p>Consulte o <a href="/?sumario0">Sum√°rio</a> para lista de r√°dios.</p>',r=e=>e.trim().replace(/[^a-z0-9\/]/gi,"").replace(/^(\d{5})(\d{6})(\d{4})(\d{2})([\w\d]+)?$/i,"$1-$2-$3-$4$5".replace("$5",e=>e?"-"+e:"")),i=r(t[0]),n=_(".lds"),a=_(".dl"),s=e=>[e,"Dados de registro incorretos","O arquivo do registro existe, mas a formata√ß√£o est√° incorreta, impedindo a exibi√ß√£o."],c=(e,t=0)=>[e,"Par√¢metro inexistente"+(t?" ou inv√°lido":""),`A URL deve terminar com <span class="url">"/?<b>XXX</b>"</span>, onde "XXX" √© o n¬∫ do peticionamento, despacho ou homologa√ß√£o Anatel sem pontua√ß√£o. ${o}`],l=e=>[e,"Sum√°rio mal formatado","O sum√°rio existe, mas possui uma formata√ß√£o incompat√≠vel para exibi√ß√£o."],d=(e,t=0)=>(t&&(e.innerHTML=t),e.innerHTML.trim()),m=_(".desc"),u=e=>e.replace(/(<([^>]+)>)/gi,""),p=e=>{d(_("#ttl"),e),document.title=u(e)},f=()=>{_(".container").style.display="block",window.setTimeout(()=>{a.classList.add("loaded"),n.style.display="none"},50)},h=(e,t="span")=>/^\s*<[\w]+/i.test(e)?e:`<${t}>${e}</${t}>`,g=(e,t,o,r)=>{const i=`\n\n${o}`,n=`‚ö†Ô∏è ${t}${w(e)}`;if(""===d(_("#ttl"))&&(p(n),f()),d(m,i),void 0===r||1===r||!0===r)throw new Error(u(`${t}${i}`))},w=e=>e?`<sup>${`${e}`.toUpperCase()}</sup>`:"",y=e=>"string"==typeof e,b=e=>Object.keys(e),C=(e,t)=>Object.hasOwn(e,t)&&void 0!==e[t],v=e=>Array.isArray(e),A=(e,t,o="",r="")=>{const i=document.createElement(t);return i.className=o,d(i,r),e&&e.appendChild(i),i};if(/([^a-z0-9-])/i.test(i))return g(...c("1T"));const D=t.length>=2?`${t[1]}`.trim().toLowerCase():0,T=e=>/^\s?(http|ftp)s?:\/\//.test(e),L=(e,t=0)=>{if(t&&y(e)&&T(e))return e.trim();if(!v(e))return t?0:e;if(0===e.length)return"";if(y(e[0])){const o=T(e[0])?0:T(e[1])?1:-1,r=`${e[o]}`.trim();if(t)return r;return`<a href="${r}" target="_blank">${e[0===o?1:0]}</a>`}return v(e[0])?t?e.map(e=>L(e,t)):"<ul>"+e.map(e=>L(e,0)).map(e=>`<li>${e}</li>`).join("")+"</ul>":""},j={id:"Peticionamento ou Processo",tp:"Tipo de processo",dp:"Data da Peti√ß√£o",mc:"Marca",md:"Modelo",fccid:"FCC ID",sn:"N√∫mero de S√©rie",r:"Homologa√ß√£o<sup>1</sup>",v:"Valida√ß√£o da Homologa√ß√£o<sup>1</sup>",dt:"Data de Homologa√ß√£o",cid:"C√≥digo de Identifica√ß√£o"},S={...j},O="\n\n<p>Apenas os destinos abaixo podem ser usados, <b>mas</b> note que a maioria n√£o conter√° URL:</p><ul class='pr'>"+Object.entries(S).map(([e,t])=>`<li><b>${e}:</b> ${t}</li>`).join("")+`</ul>${o}`,x={imp:"Certifica√ß√£o de Produto: Declara√ß√£o de Conformidade - Importado uso pr√≥prio"},E=e=>`${e}`.replace(/\$\{([\w\d]+)\}/g,(e,t)=>{const o=t.trim().toLowerCase(),r=null!=x&&C(x,o)?x[o]:null;return null===r?"???":`${r}`}),M=(e,t=void 0)=>E("v"===t?(e=>y(e)&&e.trim().length>0?e:v(e)&&2===e.length?`C√≥digo: ${e[0]}<br />CRC: ${e[1]}`:"")(e):L(e)),P=(e,t)=>{const o=A(0,"div","dl-row");A(o,"div","dt",null===e?"--":h(e)),A(o,"div","dd",null===e?"Item mal formatado":t&&t.trim().length>0?h(t):"---"),a.appendChild(o)},N=["Peticionamento","Marca / Modelo","ID"];if(t){const o=e=>`DADOS/homologacoes/${e}.json?t=`+Math.random().toString(36).substring(2,18),n=o(i),a=async t=>{const n=await getAllSumario();let a="",s="",c=!1,l=0;do{a=(t?e(t,!1)[0]:i).replace(/[^\w\d]/gi,"").substring(0,17),c=n[a].indexOf("@")<0,c?t=`/?${n[a]}`:s=C(n,a)?o(n[a].replace("@",r(a))):null}while(c&&++l<=3);return s};cachedFetch([n,a,a,a]).then(e=>{if(/sumario[\d]+/i.test(i.toLowerCase()))return(e=>{if(!Array.isArray(e))return g(...l("S1"));const t=(_(".dl table")||_(".dl").insertAdjacentHTML("beforeend",'<div class="tbl x"><table cellsspacing="0" border="0" cellpadding="0"></table></div>'),_(".dl table")),o=(e,o=0,r=0)=>{const i=A(0,"tr","");for(const t in e){if(t>e.length+r-1)break;const n=e[t].split(";").map(e=>1==t?`<i>${e}</i> `:e).join("");A(i,"td","",h(`${n}${0!=t||o?"":h("üîó")}`,"p"))}i.addEventListener("click",t=>{console.log("/?"+`${e[0]}`.replace(/[^\w\d]/gi,"")+`${e[e.length-1]}`);try{window.location="/?"+`${e[0]}`.replace(/[^\w\d]/gi,"")+`${e[3]}`}catch(e){}}),t.appendChild(i)};for(o(N,1),k=0;k<e.length;k++){const t=e[k];if(k===e.length-1&&isFinite(t)&&!isNaN(t))_(".dl").insertAdjacentHTML("beforeend",`<p class="center">\n\t\t\t\t\t\t\t\t\t${t>=2?`<a href="?sumario${t-2}">¬´ Anterior</a>`:""}\n\t\t\t\t\t\t\t\t${t<0?"":`<a href="?sumario${t}">Pr√≥ximo ¬ª</a>`}\n\t\t\t\t\t\t\t\t</p>`);else if(!Array.isArray(t)||t.length!==N.length+1)return g(...l("S2"));o(t,0,-1)}p("Sum√°rio"),f()})(e);for(const t of b(j))if(!C(e,t))return g(...s(`:${t}`));if(!C(e,"items")||!v(e.items))return g(...s("ITM1"));if(t.length>=2){if(!C(S,D))return g("D1",`Destino "${D}" inv√°lido`,`Destino n√£o √© permitido.${O}`,1);if(!C(e,D))return g("D2",`Destino "${D}" inexistente`,`Vari√°vel n√£o definida no registro.${O}`,1);const o=t.length>2?parseInt(`${t[2]}`):0,r=L(!isNaN(o)&&o<e[D].length&&v(e[D][o])?e[D][o]:e[D],1);return r?(p("Redirecionando..."),void(window.location=r)):g("D3",`Destino "${D}" inv√°lido`,`Vari√°vel de destino n√£o √© uma URL v√°lida ou existente.${O}`,1)}p(`<small>${o=e.mc,o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()||""}</small> ${e.md}`);for(const t of[...b(S),...e.items,["Solicitante",`<ul>${Object.entries(["PU2YQC","jeancarlo@jeancarloem.com","33*.***.**8-95",7246538]).map(([e,t])=>`<li>${["Esta√ß√£o","E-mail","CPF","DMR ID"][e]}: <b>${t}</b></li>`).join("")}</ul>`]]){const o=v(t)?t:[S[t]||null,e[t]];if(P(E(o[0]),M(o[1],t)),!o[0])return g(s("ITM2"))}var o;f()}).catch(e=>{console.error(n,"\n",e),g(...c("BX"))})}else g(...c("CX"))});