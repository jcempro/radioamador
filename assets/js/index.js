const isNODE="undefined"!=typeof process&&"object"==typeof process.versions&&!!process.versions.node,commom=isNODE?require("common.main.cjs"):"undefined"!=typeof window?window.commom:globalThis.commom,_=e=>document.querySelector(e),__fetchCache__=new Map,cachedFetch=async(e,t={},o=!0)=>{const a=Array.isArray(e)?e:[e],n=Date.now();let r=null;for(let e=0;e<a.length;e++){const i=a[e];let s;try{s="function"==typeof i?i():i;const e=`${s}-${JSON.stringify(t)}-${o}`;if(__fetchCache__.has(e)){const t=__fetchCache__.get(e);if(n-t.timestamp<3e5)return console.log("‚úÖ Cache hit:",s),o?t.data:t.response.clone();__fetchCache__.delete(e)}console.log("üåê Fetching:",s);const a=await fetch(s,t);if(!a.ok)throw new Error(`HTTP ${a.status}: ${a.statusText}`);if(!a.ok){console.log(`‚ùå Falha ao baixar ${s}: ${a.status} ${a.statusText}`),r=new Error(`HTTP ${a.status}: ${a.statusText}`);continue}if(o){const t=await a.json();return __fetchCache__.set(e,{data:t,timestamp:n,response:a.clone()}),t}return __fetchCache__.set(e,{response:a.clone(),timestamp:n,data:null}),a}catch(t){if(console.log(`‚ùå HTTP Fail em ${s}:`,t.message),r=t,e<a.length-1){const t="function"==typeof a[e+1]?"fun√ß√£o":"URL";console.log(`üîÑ Tentando pr√≥ximo fallback (${t})...`);continue}}}const i=a.map(e=>"function"==typeof e?`fun√ß√£o(${e.name||"anon"})`:e).join(", ");throw new Error(`Todas as URLs retornaram erro HTTP: ${i}. √öltimo erro: ${r?.message}`)};cachedFetch.clearCache=()=>__fetchCache__.clear(),cachedFetch.delete=(e,t={},o=!0)=>{const a=Array.isArray(e)?e:[e];let n=0;return a.forEach(e=>{if("string"==typeof e){const a=`${e}-${JSON.stringify(t)}-${o}`;__fetchCache__.delete(a)&&n++}}),n},cachedFetch.getCacheSize=()=>__fetchCache__.size,cachedFetch.getCacheKeys=()=>Array.from(__fetchCache__.keys());const getAllSumario=async()=>await cachedFetch("/DADOS/homologacoes/sumario_all.json");document.addEventListener("DOMContentLoaded",()=>{getAllSumario();const e=`${window.location.search}`.split("?").pop().replace(/[^a-z0-9\/]/gi,"").trim().split("/"),t='\n\n<br /><br /><p>Consulte o <a href="/?sumario0">Sum√°rio</a> para lista de r√°dios.</p>',o=e[0].trim().replace(/[^a-z0-9\/]/gi,"").replace(/^(\d{5})(\d{6})(\d{4})(\d{2})([\w\d]+)?$/i,"$1-$2-$3-$4$5".replace("$5",e=>e?"-"+e:""));const a=_(".lds"),n=_(".dl"),r=e=>[e,"Dados de registro incorretos","O arquivo do registro existe, mas a formata√ß√£o est√° incorreta, impedindo a exibi√ß√£o."],i=(e,o=0)=>[e,"Par√¢metro inexistente"+(o?" ou inv√°lido":""),`A URL deve terminar com <span class="url">"/?<b>XXX</b>"</span>, onde "XXX" √© o n¬∫ do peticionamento, despacho ou homologa√ß√£o Anatel sem pontua√ß√£o. ${t}`],s=e=>[e,"Sum√°rio mal formatado","O sum√°rio existe, mas possui uma formata√ß√£o incompat√≠vel para exibi√ß√£o."],c=(e,t=0)=>(t&&(e.innerHTML=t),e.innerHTML.trim()),l=_(".desc"),d=e=>e.replace(/(<([^>]+)>)/gi,""),m=e=>{c(_("#ttl"),e),document.title=d(e)},u=()=>{_(".container").style.display="block",window.setTimeout(()=>{n.classList.add("loaded"),a.style.display="none"},50)},p=(e,t="span")=>/^\s*<[\w]+/i.test(e)?e:`<${t}>${e}</${t}>`,h=(e,t,o,a)=>{const n=`\n\n${o}`,r=`‚ö†Ô∏è ${t}${f(e)}`;if(""===c(_("#ttl"))&&(m(r),u()),c(l,n),void 0===a||1===a||!0===a)throw new Error(d(`${t}${n}`))},f=e=>e?`<sup>${`${e}`.toUpperCase()}</sup>`:"",g=e=>"string"==typeof e,w=e=>Object.keys(e),C=(e,t)=>Object.hasOwn(e,t),b=e=>Array.isArray(e),y=(e,t,o="",a="")=>{const n=document.createElement(t);return n.className=o,c(n,a),e&&e.appendChild(n),n};if(/([^a-z0-9-])/i.test(o))return h(...i("1T"));const A=e.length>=2?`${e[1]}`.trim().toLowerCase():0,v=e=>/^\s?(http|ftp)s?:\/\//.test(e),D=(e,t=0)=>{if(t&&g(e)&&v(e))return e.trim();if(!b(e))return t?0:e;if(0===e.length)return"";if(g(e[0])){const o=v(e[0])?0:v(e[1])?1:-1,a=`${e[o]}`.trim();if(t)return a;return`<a href="${a}" target="_blank">${e[0===o?1:0]}</a>`}return b(e[0])?t?e.map(e=>D(e,t)):"<ul>"+e.map(e=>D(e,0)).map(e=>`<li>${e}</li>`).join("")+"</ul>":""},T={id:"Peticionamento ou Processo",tp:"Tipo de processo",dp:"Data da Peti√ß√£o",mc:"Marca",md:"Modelo",fccid:"FCC ID",sn:"N√∫mero de S√©rie",r:"Homologa√ß√£o<sup>1</sup>",v:"Valida√ß√£o da Homologa√ß√£o<sup>1</sup>",dt:"Data de Homologa√ß√£o",cid:"C√≥digo de Identifica√ß√£o"},j={...T},S="\n\n<p>Apenas os destinos abaixo podem ser usados, <b>mas</b> note que a maioria n√£o conter√° URL:</p><ul class='pr'>"+Object.entries(j).map(([e,t])=>`<li><b>${e}:</b> ${t}</li>`).join("")+`</ul>${t}`,L={imp:"Certifica√ß√£o de Produto: Declara√ß√£o de Conformidade - Importado uso pr√≥prio"},x=e=>`${e}`.replace(/\$\{([\w\d]+)\}/g,(e,t)=>{const o=t.trim().toLowerCase(),a=null!=L&&C(L,o)?L[o]:null;return null===a?"???":`${a}`}),M=(e,t=void 0)=>x("v"===t?(e=>g(e)&&e.trim().length>0?e:b(e)&&2===e.length?`C√≥digo: ${e[0]}<br />CRC: ${e[1]}`:"")(e):D(e)),F=(e,t)=>{const o=y(0,"div","dl-row");y(o,"div","dt",null===e?"--":p(e)),y(o,"div","dd",null===e?"Item mal formatado":t&&t.trim().length>0?p(t):"---"),n.appendChild(o)},O=["Peticionamento","Marca / Modelo","ID"];if(e){const t=e=>`DADOS/homologacoes/${e}.json?t=`+Math.random().toString(36).substring(2,18),a=t(o);cachedFetch([a,async()=>{const e=o.replace(/[^\w\d]/gi,"");return C(await getAllSumario(),e)?t(getAllSumario()[e]):"fail-cachedFetch-"+Math.random().toString(36).substring(2,36)}]).then(e=>e.ok?e.json():h(...i("AX",1))).then(t=>{if(/sumario[\d]+/i.test(o.toLowerCase()))return(e=>{if(!Array.isArray(e))return h(...s("S1"));const t=(_(".dl table")||_(".dl").insertAdjacentHTML("beforeend",'<div class="tbl x"><table cellsspacing="0" border="0" cellpadding="0"></table></div>'),_(".dl table")),o=(e,o=0)=>{const a=y(0,"tr","");for(const t in e){const n=e[t].split(";").map(e=>1==t?`<i>${e}</i> `:e).join("");y(a,"td","",p(`${n}${0!=t||o?"":p("üîó")}`,"p"))}a.addEventListener("click",t=>{try{window.location="/?"+`${e[0]}${e[3]}`.replaceAll(/[^\w\d]/i,"")}catch(e){}}),t.appendChild(a)};for(o(O,1),k=0;k<e.length;k++){const t=e[k];if(k===e.length-1&&isFinite(t)&&!isNaN(t))_(".dl").insertAdjacentHTML("beforeend",`<p class="center">\n\t\t\t\t\t\t\t\t\t${t>=2?`<a href="?sumario${t-2}">¬´ Anterior</a>`:""}\n\t\t\t\t\t\t\t\t${t<0?"":`<a href="?sumario${t}">Pr√≥ximo ¬ª</a>`}\n\t\t\t\t\t\t\t\t</p>`);else if(!Array.isArray(t)||t.length!==O.length)return h(...s("S2"));o(t)}m("Sum√°rio"),u()})(t);for(const e of w(T))if(!C(t,e))return h(...r(`:${e}`));if(!C(t,"items")||!b(t.items))return h(...r("ITM1"));if(e.length>=2){if(!C(j,A))return h("D1",`Destino "${A}" inv√°lido`,`Destino n√£o √© permitido.${S}`,1);if(!C(t,A))return h("D2",`Destino "${A}" inexistente`,`Vari√°vel n√£o definida no registro.${S}`,1);const o=e.length>2?parseInt(`${e[2]}`):0,a=D(!isNaN(o)&&o<t[A].length&&b(t[A][o])?t[A][o]:t[A],1);return a?(m("Redirecionando..."),void(window.location=a)):h("D3",`Destino "${A}" inv√°lido`,`Vari√°vel de destino n√£o √© uma URL v√°lida ou existente.${S}`,1)}m(`<small>${(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()||"")(t.mc)}</small> ${t.md}`);for(const e of[...w(j),...t.items,["Solicitante",`<ul>${Object.entries(["PU2YQC","jeancarlo@jeancarloem.com","33*.***.**8-95",7246538]).map(([e,t])=>`<li>${["Esta√ß√£o","E-mail","CPF","DMR ID"][e]}: <b>${t}</b></li>`).join("")}</ul>`]]){const o=b(e)?e:[j[e]||null,t[e]];if(F(x(o[0]),M(o[1],e)),!o[0])return h(r("ITM2"))}u()}).catch(e=>{console.error(a,"\n",e),h(...i("BX"))})}else h(...i("CX"))});